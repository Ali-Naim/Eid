<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>مسابقة عيد الغدير - الإمام علي بن أبي طالب (ع)</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    :root {
      --primary-green: #0a5f38;
      --secondary-green: #1a7d46;
      --light-green: #2ecc71;
      --gold: #f39c12;
      --dark-gold: #d35400;
      --light-gold: #f1c40f;
      --white: #ffffff;
      --light-gray: #f5f6fa;
      --shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      padding: 2rem;
      background: linear-gradient(135deg, var(--primary-green), var(--secondary-green));
      color: var(--white);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      direction: rtl;
    }
    
    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 10% 20%, rgba(243, 156, 18, 0.1) 0%, transparent 15%),
        radial-gradient(circle at 90% 80%, rgba(243, 156, 18, 0.1) 0%, transparent 15%);
      z-index: -1;
    }
    
    .header {
      text-align: center;
      margin-bottom: 2.5rem;
      position: relative;
      padding: 0 1rem;
      max-width: 800px;
    }
    
    h1 {
      font-size: 3.5rem;
      background: linear-gradient(to right, var(--gold), var(--light-gold));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 1rem;
      text-align: center;
      position: relative;
      display: inline-block;
      padding: 0 1rem;
    }
    
    h1::after {
      content: "";
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 4px;
      background: linear-gradient(to right, var(--gold), var(--dark-gold));
      border-radius: 2px;
    }
    
    .subtitle {
      font-size: 1.2rem;
      color: var(--light-gold);
      margin-top: 1rem;
      max-width: 600px;
      line-height: 1.8;
    }
    
    #randomBtn {
      background: linear-gradient(135deg, var(--gold), var(--dark-gold));
      border: none;
      color: var(--primary-green);
      padding: 1rem 2.5rem;
      border-radius: 50px;
      font-weight: 700;
      cursor: pointer;
      margin: 1.5rem 0;
      font-size: 1.1rem;
      transition: var(--transition);
      user-select: none;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    #randomBtn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 12px 30px rgba(211, 84, 0, 0.3);
    }
    
    #randomBtn::after {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: rgba(255, 255, 255, 0.1);
      transform: rotate(30deg);
      transition: var(--transition);
    }
    
    #randomBtn:hover::after {
      transform: rotate(30deg) translate(20%, 20%);
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1.8rem;
      max-width: 1000px;
      width: 100%;
      margin-top: 1rem;
    }
    
    .card {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 1.8rem 1.2rem;
      box-shadow: 
        var(--shadow),
        inset 0 0 0 2px rgba(255, 255, 255, 0.1);
      cursor: pointer;
      user-select: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      font-weight: 700;
      color: var(--gold);
      outline: none;
      height: 140px;
      position: relative;
      overflow: hidden;
      animation: cardEntrance 0.6s ease-out;
      animation-fill-mode: backwards;
    }
    
    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.2s; }
    .card:nth-child(3) { animation-delay: 0.3s; }
    .card:nth-child(4) { animation-delay: 0.4s; }
    .card:nth-child(5) { animation-delay: 0.5s; }
    .card:nth-child(6) { animation-delay: 0.6s; }
    .card:nth-child(7) { animation-delay: 0.7s; }
    .card:nth-child(8) { animation-delay: 0.8s; }
    .card:nth-child(9) { animation-delay: 0.9s; }
    .card:nth-child(10) { animation-delay: 1.0s; }
    .card:nth-child(11) { animation-delay: 1.1s; }
    .card:nth-child(12) { animation-delay: 1.2s; }
    .card:nth-child(13) { animation-delay: 1.3s; }
    .card:nth-child(14) { animation-delay: 1.4s; }
    .card:nth-child(15) { animation-delay: 1.5s; }
    .card:nth-child(16) { animation-delay: 1.6s; }
    .card:nth-child(17) { animation-delay: 1.7s; }
    .card:nth-child(18) { animation-delay: 1.8s; }
    
    @keyframes cardEntrance {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    .card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(243, 156, 18, 0.2), transparent 70%);
      opacity: 0;
      transition: var(--transition);
    }
    
    .card:hover,
    .card:focus {
      transform: translateY(-10px) scale(1.05);
      box-shadow: 
        0 15px 35px rgba(0, 0, 0, 0.25),
        inset 0 0 0 2px rgba(243, 156, 18, 0.5);
      color: var(--light-gold);
    }
    
    .card:hover::before,
    .card:focus::before {
      opacity: 1;
    }
    
    .card-number {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: linear-gradient(to bottom, var(--gold), var(--dark-gold));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      transition: var(--transition);
    }
    
    .card:hover .card-number {
      transform: scale(1.1);
    }
    
    .card-category {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: rgba(255, 255, 255, 0.7);
      transition: var(--transition);
    }
    
    .card:hover .card-category {
      color: var(--gold);
    }
    
    /* Modal styles */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(10, 95, 56, 0.95);
      display: flex;
      justify-content: center;
      align-items: center;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.5s ease, visibility 0.5s;
      z-index: 1000;
      backdrop-filter: blur(5px);
    }
    
    .modal-overlay.active {
      visibility: visible;
      opacity: 1;
    }
    
    .modal {
      background: linear-gradient(to bottom, rgba(26, 125, 70, 0.9), rgba(10, 95, 56, 0.95));
      border-radius: 25px;
      padding: 3rem;
      max-width: 700px;
      width: 90%;
      box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.4),
        0 0 0 2px var(--gold);
      text-align: center;
      position: relative;
      user-select: text;
      animation: modalEntrance 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      overflow: hidden;
    }
    
    @keyframes modalEntrance {
      from { 
        opacity: 0; 
        transform: translateY(50px) scale(0.9);
      }
      to { 
        opacity: 1; 
        transform: translateY(0) scale(1);
      }
    }
    
    .modal::before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(243, 156, 18, 0.1) 0%, transparent 70%);
      z-index: -1;
      animation: rotate 20s linear infinite;
    }
    
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .modal h2 {
      color: var(--gold);
      font-weight: 700;
      margin-bottom: 2rem;
      font-size: 1.8rem;
      line-height: 1.8;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    
    .modal .answer {
      margin-top: 1.5rem;
      padding: 1.8rem;
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.08);
      color: var(--light-gold);
      font-size: 1.2rem;
      display: none;
      user-select: text;
      line-height: 1.8;
      border: 1px solid rgba(243, 156, 18, 0.3);
      position: relative;
      overflow: hidden;
      text-align: right;
    }
    
    .modal .answer::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 5px;
      height: 100%;
      background: var(--gold);
    }
    
    .modal .answer.show {
      display: block;
      animation: answerReveal 0.8s ease-out forwards;
    }
    
    @keyframes answerReveal {
      from { 
        opacity: 0;
        transform: translateY(20px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .btn {
      background: linear-gradient(135deg, var(--gold), var(--dark-gold));
      color: var(--primary-green);
      border: none;
      padding: 0.9rem 2rem;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 700;
      font-size: 1.1rem;
      transition: var(--transition);
      user-select: none;
      box-shadow: 0 5px 20px rgba(211, 84, 0, 0.3);
      margin-top: 1.5rem;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }
    
    .btn:hover,
    .btn:focus {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 25px rgba(211, 84, 0, 0.4);
      outline: none;
    }
    
    .btn:disabled {
      opacity: 0.7;
      transform: none;
      cursor: not-allowed;
      box-shadow: none;
    }
    
    .close-btn {
      position: absolute;
      top: 1.5rem;
      left: 1.8rem;
      background: transparent;
      border: none;
      font-size: 2.2rem;
      cursor: pointer;
      color: var(--gold);
      font-weight: 700;
      user-select: none;
      transition: var(--transition);
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }
    
    .close-btn:hover,
    .close-btn:focus {
      color: var(--light-gold);
      background: rgba(255, 255, 255, 0.1);
      transform: rotate(90deg);
      outline: none;
    }
    
    .category-tag {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(243, 156, 18, 0.2);
      color: var(--gold);
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .stats {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 2rem;
      color: var(--light-gold);
      font-size: 0.9rem;
    }
    
    .stat-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 2.5rem;
      }
      
      .grid {
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 1.2rem;
      }
      
      .card {
        height: 120px;
        padding: 1.5rem 1rem;
      }
      
      .card-number {
        font-size: 2.5rem;
      }
      
      .modal {
        padding: 2rem;
      }
      
      .modal h2 {
        font-size: 1.4rem;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 1.5rem;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .grid {
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
        gap: 1rem;
      }
      
      .card {
        height: 100px;
        padding: 1rem 0.5rem;
      }
      
      .card-number {
        font-size: 2rem;
      }
      
      .stats {
        flex-direction: column;
        gap: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1><i class="fas fa-book-quran"></i> مسابقة عيد الغدير</h1>
    <p class="subtitle">اختبر معلوماتك في سيرة أمير المؤمنين علي بن أبي طالب (ع) من خلال ١٨ سؤالاً في السيرة والقرآن والحديث والفضائل</p>
    <button id="randomBtn" aria-label="سؤال عشوائي">
      <i class="fas fa-dice"></i> سؤال عشوائي
    </button>
  </div>
  
  <div class="grid" role="list" aria-label="بطاقات الأسئلة">
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١" data-index="0">
      <div class="card-number">١</div>
      <div class="card-category">القرآن</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ٢" data-index="1">
      <div class="card-number">٢</div>
      <div class="card-category">الحديث</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ٣" data-index="2">
      <div class="card-number">٣</div>
      <div class="card-category">السيرة</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ٤" data-index="3">
      <div class="card-number">٤</div>
      <div class="card-category">الفضائل</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ٥" data-index="4">
      <div class="card-number">٥</div>
      <div class="card-category">القرآن</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ٦" data-index="5">
      <div class="card-number">٦</div>
      <div class="card-category">الحديث</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ٧" data-index="6">
      <div class="card-number">٧</div>
      <div class="card-category">السيرة</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ٨" data-index="7">
      <div class="card-number">٨</div>
      <div class="card-category">الفضائل</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ٩" data-index="8">
      <div class="card-number">٩</div>
      <div class="card-category">القرآن</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١٠" data-index="9">
      <div class="card-number">١٠</div>
      <div class="card-category">الحديث</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١١" data-index="10">
      <div class="card-number">١١</div>
      <div class="card-category">السيرة</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١٢" data-index="11">
      <div class="card-number">١٢</div>
      <div class="card-category">الفضائل</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١٣" data-index="12">
      <div class="card-number">١٣</div>
      <div class="card-category">القرآن</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١٤" data-index="13">
      <div class="card-number">١٤</div>
      <div class="card-category">الحديث</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١٥" data-index="14">
      <div class="card-number">١٥</div>
      <div class="card-category">السيرة</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١٦" data-index="15">
      <div class="card-number">١٦</div>
      <div class="card-category">الفضائل</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١٧" data-index="16">
      <div class="card-number">١٧</div>
      <div class="card-category">القرآن</div>
    </div>
    <div class="card" role="listitem" tabindex="0" aria-label="السؤال ١٨" data-index="17">
      <div class="card-number">١٨</div>
      <div class="card-category">الحديث</div>
    </div>
  </div>

  <div class="stats">
    <div class="stat-item">
      <i class="fas fa-book-quran"></i> <span id="quranCount">٥ أسئلة قرآنية</span>
    </div>
    <div class="stat-item">
      <i class="fas fa-book"></i> <span id="hadithCount">٥ أسئلة حديثية</span>
    </div>
    <div class="stat-item">
      <i class="fas fa-mosque"></i> <span id="sirahCount">٤ أسئلة سيرية</span>
    </div>
    <div class="stat-item">
      <i class="fas fa-star"></i> <span id="fadaelCount">٤ أسئلة فضائل</span>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-question" aria-describedby="modal-answer" tabindex="-1">
    <div class="modal">
      <button class="close-btn" aria-label="إغلاق">&times;</button>
      <div class="category-tag" id="question-category">القرآن</div>
      <h2 id="modal-question">السؤال يظهر هنا</h2>
      <button id="revealAnswerBtn" class="btn" aria-controls="modal-answer" aria-expanded="false">
        <i class="fas fa-lightbulb"></i> إظهار الإجابة
      </button>
      <div id="modal-answer" class="answer" tabindex="0"></div>
    </div>
  </div>

  <script>
    const questions = [
      {
        question: "في أي سورة وردت آية التبليغ التي نزلت في الإمام علي (ع) يوم الغدير؟",
        answer: "سورة المائدة، الآية 67: {يَا أَيُّهَا الرَّسُولُ بَلِّغْ مَا أُنزِلَ إِلَيْكَ مِن رَّبِّكَ ۖ وَإِن لَّمْ تَفْعَلْ فَمَا بَلَّغْتَ رِسَالَتَهُ ۚ وَاللَّهُ يَعْصِمُكَ مِنَ النَّاسِ}",
        category: "القرآن"
      },
      {
        question: "ما هو الحديث الشهير الذي قاله النبي (ص) في الإمام علي (ع) يوم الغدير؟",
        answer: "قال رسول الله (ص): \"من كنت مولاه فهذا علي مولاه، اللهم والِ من والاه، وعادِ من عاداه، وانصر من نصره، واخذل من خذله\"",
        category: "الحديث"
      },
      {
        question: "في أي مكان حدثت واقعة الغدير؟",
        answer: "حدثت واقعة الغدير في منطقة تسمى غدير خم بين مكة والمدينة بعد حجة الوداع في السنة العاشرة للهجرة.",
        category: "السيرة"
      },
      {
        question: "ما هي بعض فضائل الإمام علي (ع) المذكورة في نهج البلاغة؟",
        answer: "من فضائله: أول من أسلم، صاحب لواء النبي (ص)، باب مدينة العلم، كرار غير فرار، وزوج فاطمة الزهراء (ع)، وأبو السبطين الحسن والحسين (ع).",
        category: "الفضائل"
      },
      {
        question: "ما هي الآية التي نزلت في حق الإمام علي (ع) عندما تصدق بخاتمه وهو راكع؟",
        answer: "آية الولاية في سورة المائدة: {إِنَّمَا وَلِيُّكُمُ اللَّهُ وَرَسُولُهُ وَالَّذِينَ آمَنُوا الَّذِينَ يُقِيمُونَ الصَّلَاةَ وَيُؤْتُونَ الزَّكَاةَ وَهُمْ رَاكِعُونَ} (55)",
        category: "القرآن"
      },
      {
        question: "ما هو الحديث المعروف بحديث المنزلة؟",
        answer: "قال النبي (ص) للإمام علي (ع): \"أما ترضى أن تكون مني بمنزلة هارون من موسى إلا أنه لا نبي بعدي؟\"",
        category: "الحديث"
      },
      {
        question: "كم كان عمر الإمام علي (ع) عندما استشهد؟",
        answer: "استشهد الإمام علي (ع) في ليلة 21 رمضان سنة 40 هـ عن عمر 63 سنة، وهو نفس عمر النبي (ص) عند وفاته.",
        category: "السيرة"
      },
      {
        question: "ما هي كنية الإمام علي (ع) ولماذا لقب بها؟",
        answer: "كنيته أبو تراب، وقد لقبه بها رسول الله (ص) عندما وجده نائماً في المسجد وقد علاه التراب.",
        category: "الفضائل"
      },
      {
        question: "ما هي السورة التي نزلت بحق الإمام علي (ع) وأهل بيته؟",
        answer: "سورة الإنسان (هل أتى) التي نزلت في فضل علي وفاطمة والحسن والحسين (ع) عندما تصدقوا بإفطارهم لثلاثة أيام متتالية.",
        category: "القرآن"
      },
      {
        question: "ما هو الحديث الذي قاله النبي (ص) في حب الإمام علي (ع)؟",
        answer: "قال رسول الله (ص): \"حب علي إيمان وبغضه نفاق\"، وقال أيضاً: \"لا يحبك إلا مؤمن ولا يبغضك إلا منافق\".",
        category: "الحديث"
      },
      {
        question: "أين ولد الإمام علي (ع)؟",
        answer: "ولد الإمام علي (ع) داخل الكعبة المشرفة في مكة المكرمة يوم الجمعة 13 رجب قبل البعثة بعشر سنوات.",
        category: "السيرة"
      },
      {
        question: "ما هي ألقاب الإمام علي (ع) المشهورة؟",
        answer: "من ألقابه: أمير المؤمنين، المرتضى، حيدرة، أسد الله، يعسوب الدين، وصي رسول الله، باب مدينة العلم.",
        category: "الفضائل"
      },
      {
        question: "ما هي الآية التي تسمى آية المودة وفي حق من نزلت؟",
        answer: "قوله تعالى: {قُل لَّا أَسْأَلُكُمْ عَلَيْهِ أَجْرًا إِلَّا الْمَوَدَّةَ فِي الْقُرْبَىٰ} (سورة الشورى: 23)، وقد نزلت في حق أهل البيت (ع) وخاصة في الإمام علي (ع).",
        category: "القرآن"
      },
      {
        question: "ما هو حديث الثقلين؟",
        answer: "قال رسول الله (ص): \"إني تارك فيكم الثقلين: كتاب الله وعترتي أهل بيتي، وإنهما لن يفترقا حتى يردا علي الحوض\".",
        category: "الحديث"
      },
      {
        question: "كم سنة حكم الإمام علي (ع) بعد استشهاد الخليفة عثمان؟",
        answer: "حكم الإمام علي (ع) لمدة 4 سنوات و9 أشهر من سنة 35 هـ إلى استشهاده في 21 رمضان سنة 40 هـ.",
        category: "السيرة"
      },
      {
        question: "ما هي الوصية التي أوصى بها النبي (ص) للإمام علي (ع) في لحظاته الأخيرة؟",
        answer: "قال النبي (ص) في مرض موته: \"يا علي، أنت وليي في كل مؤمن بعدي، أنت الخليفة من بعدي، تقضي ديني وتنجز عداتي\".",
        category: "الفضائل"
      },
      {
        question: "ما هي السورة التي سميت باسم الإمام علي (ع)؟",
        answer: "سورة العاديات التي نزلت في شأن الإمام علي (ع) عندما عدا على العدو بفرسه في معركة حنين.",
        category: "القرآن"
      },
      {
        question: "ما هو الحديث الذي قاله النبي (ص) في فضل علي (ع) يوم خيبر؟",
        answer: "قال رسول الله (ص): \"لأعطين الراية غداً رجلاً يحب الله ورسوله ويحبه الله ورسوله، يفتح الله على يديه\"، فأعطاها للإمام علي (ع).",
        category: "الحديث"
      }
    ];

    const cards = document.querySelectorAll('.card');
    const modalOverlay = document.querySelector('.modal-overlay');
    const modalQuestion = document.getElementById('modal-question');
    const modalAnswer = document.getElementById('modal-answer');
    const revealAnswerBtn = document.getElementById('revealAnswerBtn');
    const randomBtn = document.getElementById('randomBtn');
    const closeBtn = document.querySelector('.close-btn');
    const questionCategory = document.getElementById('question-category');
    let currentIndex = null;

    // Initialize category counters
    document.getElementById('quranCount').textContent = 
      `${questions.filter(q => q.category === "القرآن").length} أسئلة قرآنية`;
    document.getElementById('hadithCount').textContent = 
      `${questions.filter(q => q.category === "الحديث").length} أسئلة حديثية`;
    document.getElementById('sirahCount').textContent = 
      `${questions.filter(q => q.category === "السيرة").length} أسئلة سيرية`;
    document.getElementById('fadaelCount').textContent = 
      `${questions.filter(q => q.category === "الفضائل").length} أسئلة فضائل`;

    // Open modal with selected question
    function openModal(index) {
      currentIndex = index;
      const q = questions[index];
      modalQuestion.textContent = q.question;
      questionCategory.textContent = q.category;
      modalAnswer.textContent = '';
      modalAnswer.classList.remove('show');
      revealAnswerBtn.setAttribute('aria-expanded', 'false');
      revealAnswerBtn.disabled = false;
      modalOverlay.classList.add('active');
      revealAnswerBtn.focus();
      trapFocus(modalOverlay);
    }

    // Close modal
    function closeModal() {
      modalOverlay.classList.remove('active');
      if(currentIndex !== null) {
        cards[currentIndex].focus();
      } else {
        randomBtn.focus();
      }
      currentIndex = null;
    }

    // Reveal answer
    revealAnswerBtn.addEventListener('click', () => {
      modalAnswer.textContent = questions[currentIndex].answer;
      modalAnswer.classList.add('show');
      revealAnswerBtn.setAttribute('aria-expanded', 'true');
      revealAnswerBtn.disabled = true;
      modalAnswer.focus();
    });

    // Close modal on close button or outside click
    closeBtn.addEventListener('click', closeModal);
    modalOverlay.addEventListener('click', (e) => {
      if(e.target === modalOverlay) closeModal();
    });

    // Keyboard: close modal with Escape key
    window.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && modalOverlay.classList.contains('active')) {
        closeModal();
      }
    });

    // Card click handlers
    cards.forEach(card => {
      card.addEventListener('click', () => {
        openModal(parseInt(card.dataset.index));
      });
      card.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openModal(parseInt(card.dataset.index));
        }
      });
    });

    // Random button picks a random question
    randomBtn.addEventListener('click', () => {
      const randomIndex = Math.floor(Math.random() * questions.length);
      openModal(randomIndex);
    });

    // Focus trap helper
    function trapFocus(element) {
      const focusableElements = element.querySelectorAll('button, [tabindex]:not([tabindex="-1"])');
      if(focusableElements.length === 0) return;
      
      let firstFocusable = focusableElements[0];
      let lastFocusable = focusableElements[focusableElements.length - 1];
      
      element.addEventListener('keydown', function trap(e) {
        if(e.key === 'Tab') {
          if(e.shiftKey) {
            if(document.activeElement === firstFocusable) {
              e.preventDefault();
              lastFocusable.focus();
            }
          } else {
            if(document.activeElement === lastFocusable) {
              e.preventDefault();
              firstFocusable.focus();
            }
          }
        }
      });
    }
  </script>
</body>
</html>